# Conditional-Asian-Option-Monte-Carlo-Simulation
Conditional Asian option is a variation of Asian option. It is a recent market innovation introduced by BNP Paribas in an industrial conference [Segaud, 2011](https://docplayer.net/5409701-Equity-based-insurance-guarantees-conference-november-14-15-2011-chicago-il-alternative-solutions-for-variable-annuity-hedging.html) 

The ﬁnal payoﬀ of a ﬁxed-strike conditional Asian put option with strike price E is

<a href="https://www.codecogs.com/eqnedit.php?latex=V(T)=&space;\text{max}&space;\left[E-\frac{\int_{0}^{T}S\left(t\right)\theta\left[S\left(t\right)-B\right]dt}{\int_{0}^{T}\theta\left[S\left(t\right)-B\right]dt},\&space;0\right]" target="_blank"><img src="https://latex.codecogs.com/gif.latex?V(T)=&space;\text{max}&space;\left[E-\frac{\int_{0}^{T}S\left(t\right)\theta\left[S\left(t\right)-B\right]dt}{\int_{0}^{T}\theta\left[S\left(t\right)-B\right]dt},\&space;0\right]" title="V(T)= \text{max} \left[E-\frac{\int_{0}^{T}S\left(t\right)\theta\left[S\left(t\right)-B\right]dt}{\int_{0}^{T}\theta\left[S\left(t\right)-B\right]dt},\ 0\right]" /></a>,

where

<a href="https://www.codecogs.com/eqnedit.php?latex=\begin{cases}&space;\theta\left[S\left(t\right)-B\right]&space;=&space;1&space;\text{&space;when&space;}&space;S(t)&space;\geq&space;B,&space;\\&space;\theta\left[S\left(t\right)-B\right]&space;=&space;0&space;\text{&space;when&space;}&space;S(t)&space;<&space;B&space;\&space;.&space;\end{cases}" target="_blank"><img src="https://latex.codecogs.com/gif.latex?\begin{cases}&space;\theta\left[S\left(t\right)-B\right]&space;=&space;1&space;\text{&space;when&space;}&space;S(t)&space;\geq&space;B,&space;\\&space;\theta\left[S\left(t\right)-B\right]&space;=&space;0&space;\text{&space;when&space;}&space;S(t)&space;<&space;B&space;\&space;.&space;\end{cases}" title="\begin{cases} \theta\left[S\left(t\right)-B\right] = 1 \text{ when } S(t) \geq B, \\ \theta\left[S\left(t\right)-B\right] = 0 \text{ when } S(t) < B \ . \end{cases}" /></a> .

In my thesis, an semi-analytical approximation method is built up to approximate its option price. To estimate the robustness and efficiency of my method, its result is compared to those generated by Monte-Carlo method. Here, we provide the MATLAB code to price the conditional Asian option with the above payoff function with the Monte-Carlo method and anthetic variate to reduce the variance.


### Clone this repo
`$ git clone https://github.com/phynance/pricing-conditional-Asian-option-MC-method-/`

## How to use?
1. Users can set the values of the model parameters here. In this program, the Black-Scholes model assumption is used where the asset prices are lognormally distributed.

```
%%%%%% Problem and method parameters %%%%%%%%%
sigma = 0.2; % implied volatility
r = 0.05;    % risk-free interest rate
T = 1;       % expiry
t = 0;       % initial time
tau = T-t;   % time-to-maturity        
Dt = 0.001;  % size of time step in MC simulations 
M = 1E5;     % number of asset paths in MC simulations
K = 3;       % fixed strike    
B = 1.5 ;    % 50% observation barrier
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
```
Here, we follow the setting as done by BNP Paribas, where the observation is set to be 50% of the exercise price. M is the number of simulations of asset paths you want. Here 10^5 of asset paths are simulate.


2. It is also worth noticing the values of I and J are set to be zero at time-zero case. 
```
II = 0.; % initial value of continuous-arithmetic sum of asset prices above B (it is non-zero with initial time is not 0 )
J = 0 ;  % initial value of continuous-arithmetic sum of time whose asset prices above B (it is non-zero with initial time is not 0 )
```


3. To speed up the program, the special function in MATLAB "parfor-Loops" are used
```
parfor n = 1:M   %%%%    execute for-loop iterations in parallel
```

## Result
The program output 1 figure plotting the option prices for different initial asset prices.
<img src="https://github.com/phynance/pricing-conditional-Asian-option-MC-method-/blob/master/result.png">

The standard errors in MC simulation for each option price are stored in the list 
```
stderr
```
